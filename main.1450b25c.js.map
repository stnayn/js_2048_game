{"version":3,"sources":["scripts/main.js"],"names":["board","score","document","querySelector","count","rows","columns","startBtn","setGame","getElementById","innerHTML","textContent","classList","add","style","visibility","row","col","tile","createElement","id","toString","UpdateTile","append","setRandomCeil","areYouWin","r","c","areYouLose","availableMoves","removeEventListener","hasEmptyTile","found","Math","floor","random","num","value","filterZero","filter","slide","slidedRow","i","length","push","slideLeft","canSlide","originalRow","arraysEqual","disableKeyupEvent","slideRight","reverse","slideUp","slideDown","arr1","arr2","onclick","addEventListener","e","code"],"mappings":"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","file":"main.1450b25c.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nlet board;\nconst score = document.querySelector('.game-score');\nlet count = 0;\nconst rows = 4;\nconst columns = 4;\nconst startBtn = document.querySelector('.start');\n\nstartBtn.onclick = setGame;\n\nfunction setGame() {\n  document.getElementById('board').innerHTML = '';\n  startBtn.textContent = 'Restart';\n  startBtn.classList.add('restart');\n  document.querySelector('.message-start').style.visibility = 'hidden';\n  count = 0;\n\n  if (document.querySelector('.message-lose').style.visibility === 'visible') {\n    document.querySelector('.message-lose').style.visibility = 'hidden';\n  }\n\n  if (document.querySelector('.message-win').style.visibility === 'visible') {\n    document.querySelector('.message-win').style.visibility = 'hidden';\n  }\n\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < columns; col++) {\n      const tile = document.createElement('div');\n\n      tile.id = row.toString() + '-' + col.toString();\n\n      const num = board[row][col];\n\n      UpdateTile(tile, num);\n      document.getElementById('board').append(tile);\n    }\n  }\n\n  setRandomCeil();\n  setRandomCeil();\n}\n\nfunction areYouWin() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 2048) {\n        document.querySelector('.message-win').style.visibility = 'visible';\n      }\n    }\n  }\n}\n\nfunction areYouLose() {\n  let availableMoves = 0;\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 0) {\n        availableMoves++;\n\n        return;\n      }\n\n      if (c > 0 && board[r][c] === board[r][c - 1]) {\n        availableMoves++;\n\n        return;\n      }\n\n      if (r > 0 && board[r][c] === board[r - 1][c]) {\n        availableMoves++;\n\n        return;\n      }\n    }\n  }\n\n  if (availableMoves === 0) {\n    document.querySelector('.message-lose').style.visibility = 'visible';\n    document.removeEventListener('keyup');\n  }\n}\n\nfunction hasEmptyTile() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\nfunction setRandomCeil() {\n  if (!hasEmptyTile()) {\n    document.querySelector('.message-lose').style.visibility = 'visible';\n    document.removeEventListener('keyup');\n\n    return;\n  }\n\n  let found = false;\n\n  while (!found) {\n    const r = Math.floor(Math.random() * rows);\n    const c = Math.floor(Math.random() * columns);\n\n    if (board[r][c] === 0) {\n      const num = Math.random() < 0.1 ? 4 : 2;\n\n      board[r][c] = num;\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n\n      tile.textContent = num;\n      tile.classList.add('field-cell--' + num);\n      found = true;\n    }\n  }\n}\n\nfunction UpdateTile(tile, num) {\n  tile.textContent = '';\n  tile.classList.value = '';\n  tile.classList.add('field-cell');\n\n  if (num > 0) {\n    tile.textContent = num.toString();\n\n    if (num <= 2048) {\n      tile.classList.add('field-cell--' + num.toString());\n    };\n\n    if (num > 2048) {\n      tile.classList.add('field-cell--2048');\n    }\n  }\n}\n\ndocument.addEventListener('keyup', (e) => {\n  if (e.code === 'ArrowLeft') {\n    slideLeft();\n    setRandomCeil();\n  }\n\n  if (e.code === 'ArrowRight') {\n    slideRight();\n    setRandomCeil();\n  }\n\n  if (e.code === 'ArrowUp') {\n    slideUp();\n    setRandomCeil();\n  }\n\n  if (e.code === 'ArrowDown') {\n    slideDown();\n    setRandomCeil();\n  }\n\n  score.textContent = count;\n  areYouWin();\n  areYouLose();\n});\n\nfunction filterZero(row) {\n  return row.filter(num => num !== 0);\n}\n\nfunction slide(row) {\n  let slidedRow = filterZero(row);\n\n  for (let i = 0; i < slidedRow.length - 1; i++) {\n    if (slidedRow[i] === slidedRow[i + 1]) {\n      slidedRow[i] *= 2;\n      slidedRow[i + 1] = 0;\n\n      count += slidedRow[i];\n    }\n  }\n\n  slidedRow = filterZero(slidedRow);\n\n  while (slidedRow.length < columns) {\n    slidedRow.push(0);\n  }\n\n  return slidedRow;\n}\n\nfunction slideLeft() {\n  let canSlide = false;\n\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n    const originalRow = [...row];\n\n    row = slide(row);\n    board[r] = row;\n\n    if (!arraysEqual(originalRow, row)) {\n      canSlide = true;\n    }\n\n    for (let c = 0; c < columns; c++) {\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      UpdateTile(tile, num);\n    }\n  }\n\n  if (!canSlide) {\n    disableKeyupEvent();\n  }\n}\n\nfunction slideRight() {\n  let canSlide = false;\n\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n    const originalRow = [...row];\n\n    row.reverse();\n    row = slide(row);\n\n    board[r] = row.reverse();\n\n    if (!arraysEqual(originalRow, row)) {\n      canSlide = true;\n    }\n\n    for (let c = 0; c < columns; c++) {\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      UpdateTile(tile, num);\n    }\n  }\n\n  if (!canSlide) {\n    disableKeyupEvent();\n  }\n}\n\nfunction slideUp() {\n  let canSlide = false;\n\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n    const originalRow = [...row];\n\n    row = slide(row);\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      UpdateTile(tile, num);\n    }\n\n    if (!arraysEqual(originalRow, row)) {\n      canSlide = true;\n    }\n  }\n\n  if (!canSlide) {\n    disableKeyupEvent();\n  }\n}\n\nfunction slideDown() {\n  let canSlide = false;\n\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n    const originalRow = [...row];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      UpdateTile(tile, num);\n    }\n\n    if (!arraysEqual(originalRow, row)) {\n      canSlide = true;\n    }\n  }\n\n  if (!canSlide) {\n    disableKeyupEvent();\n  }\n}\n\nfunction arraysEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction disableKeyupEvent() {\n  document.removeEventListener('keyup');\n}\n"]}